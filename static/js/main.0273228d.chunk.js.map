{"version":3,"sources":["components/Header.js","context/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/ImagePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/Api.js","components/App.js","index.js","images/logo.svg"],"names":["Header","className","src","Applogo","alt","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","onClick","type","aria-label","name","length","Main","props","cards","onEditAvatar","onEditProfile","onAddPlace","style","backgroundImage","avatar","about","map","item","index","key","Footer","Date","getFullYear","PopupWithForm","title","isOpen","onClose","onSubmit","submitTitle","isLoading","children","method","action","noValidate","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","onChange","target","value","id","placeholder","minLength","maxLength","pattern","required","ImagePopup","isClose","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","AddPlacePopup","titleRef","linkRef","api","baseUrl","headers","this","_baseUrl","_headers","Promise","all","getUserInfo","getInitialCards","res","ok","json","reject","status","fetch","then","_handleResponse","data","body","JSON","stringify","authorization","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","selectedCard","setSelectedCard","setCards","setCurrentUser","setIsLoading","handleEscapeClose","closeAllPopups","handleOverlayClose","classList","contains","getInfoFromServer","userData","initialCards","document","addEventListener","removeEventListener","Provider","deleteLike","newCard","newCards","c","putLike","deleteCard","filter","patchUserProfile","postUserCard","patchAvatar","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.0273228d.chunk.js","sourcesContent":["import React from \"react\";\nimport Applogo from \"../images/logo.svg\";\n\nfunction Header() {\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" src={Applogo} alt=\"Логотип проекта 'Mesto'\" />\n    </header>\n  )\n}\n\nexport default Header","import React from \"react\";\n\n\nexport const CurrentUserContext = React.createContext()\n","import React from \"react\";\nimport {CurrentUserContext} from '../context/CurrentUserContext'\n\nfunction Card({card, onCardClick, onCardLike, onCardDelete}) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  function handleCardDelete() {\n    onCardDelete(card)\n  }\n\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = card.owner._id === currentUser._id;\n\n  const cardDeleteButtonClassName = (`element__trash ${isOwn ? 'element__trash_type_active' : '' }`);\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = `element__like ${isLiked ? 'element__like_type_active' : ''}`\n\n  return(\n    <div className=\"element\">\n      <img className=\"element__photo\" src={card.link} onClick={handleClick} alt={card.link} />\n      <button className={cardDeleteButtonClassName} onClick={handleCardDelete}  type=\"button\" aria-label=\"Удалить\"/>\n      <div className=\"element__row\">\n        <h2 className=\"element__title\">{card.name}</h2>\n        <div className=\"element__like-section\">\n          <button className={cardLikeButtonClassName} onClick={handleLikeClick} type=\"button\" aria-label=\"поставить 'лайк'\"/>\n          <span className=\"element__like-counter\">{card.likes.length > 0 ? `${card.likes.length}` : 0}</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Card","import React from \"react\";\nimport Card from \"./Card\";\nimport {CurrentUserContext} from '../context/CurrentUserContext'\n\nfunction Main(props) {\n  const {cards, onEditAvatar, onEditProfile, onAddPlace, onCardDelete, onCardLike, onCardClick} = props;\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return(\n    <main className=\"content\">\n\n      <section className=\"profile\">\n        <div className=\"profile__image\">\n          <div className=\"profile__avatar\" alt={''} style={{ backgroundImage: `url(${currentUser.avatar})` }}/>\n          <button className='profile__edit-avatar' type=\"button\" aria-label=\"Редактировать аватар\" onClick={onEditAvatar} />\n        </div>\n\n        <div className=\"profile__info\">\n          <div className=\"profile__row\">\n            <h1 className=\"profile__title\">{currentUser.name}</h1>\n            <button className=\"profile__edit-button\" type=\"button\" aria-label=\"Редактировать профиль\" onClick={onEditProfile}/>\n          </div>\n            <p className=\"profile__job-description\">{currentUser.about}</p>\n        </div>\n        <button className=\"profile__add-button\" type=\"button\" aria-label=\"Добавить элемент\" onClick={onAddPlace}/>\n      </section>\n\n      <section className=\"elements\" aria-label=\"элементы\">\n        {cards.map((item, index) =>\n          <Card\n            key={index}\n            card={item}\n            onCardLike={onCardLike}\n            onCardDelete={onCardDelete}\n            onCardClick={onCardClick}\n          />\n        )}\n      </section>\n    </main>\n  )\n}\n\nexport default Main;","import React from \"react\";\n\nfunction Footer () {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyrigth\">&copy; {new Date().getFullYear()} Mesto Russia</p>\n    </footer>\n  )  \n}\n\nexport default Footer;","import React from \"react\";\n\nfunction PopupWithForm({name, title, isOpen, onClose, onSubmit, submitTitle, isLoading, children}) {\n  return(\n    <div className={`popup popup_type_${name} ${isOpen && 'popup_active'}`} >\n      <form\n        className=\"popup__container popup__container_type_profile\"\n        method=\"GET\"\n        name={`${name}`}\n        onSubmit={onSubmit}\n        action=\"#\"\n        noValidate\n      >\n        <button\n          className=\"popup__close\"\n          type=\"reset\"\n          aria-label=\"закрыть\"\n          onClick={onClose}\n        />\n        <h3 className=\"popup__title\">{title}</h3>\n        {children}\n        <button className=\"popup__submit\" type=\"submit\">{isLoading ? `Сохраняю...` : `${submitTitle}`}</button>\n      </form>\n    </div>\n\n  )\n}\nexport default PopupWithForm","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from '../context/CurrentUserContext'\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser, isLoading}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState('')\n  const [description, setDescription] = React.useState('')\n\n  function handleNameUpdater(e) {\n    setName(e.target.value);\n  }\n\n  function handleDescriptionUpdater(e) {\n    setDescription(e.target.value);\n  }\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleSubmit(e){\n    e.preventDefault();\n    onUpdateUser({\n      name: name,\n      about: description\n    });\n  }\n\n  return (\n    <PopupWithForm\n      title=\"Редактировать профиль\"\n      name=\"edit-profile\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isLoading={isLoading}\n      submitTitle={'Сохранить'}>\n\n      <fieldset className=\"popup__inputs\">\n        <input\n          onChange={handleNameUpdater}\n          value={name}\n          className=\"popup__input popup__input_type_name\"\n          type=\"text\"\n          name=\"name\"\n          id=\"name-input\"\n          placeholder=\"Введите имя\"\n          minLength=\"2\"\n          maxLength=\"40\"\n          pattern=\"[a-zA-Zа-яёА-ЯЁ\\s-]*\"\n          required\n        />\n        <span className=\"popup__error\" id=\"name-input-error\"/>\n        <input\n          onChange={handleDescriptionUpdater}\n          value={description}\n          className=\"popup__input popup__input_type_job\"\n          type=\"text\"\n          name=\"about\"\n          id=\"about-input\"\n          placeholder=\"Введите профессию\"\n          minLength=\"2\"\n          maxLength=\"200\"\n          required\n        />\n        <span className=\"popup__error\" id=\"about-input-error\"/>\n      </fieldset>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup","import React from \"react\";\n\nfunction ImagePopup({card, isClose}) {\n  return (\n    <div className={`popup popup_type_image ${card && 'popup_active'}`}>\n      <div className=\"popup__image-container\">\n        <button className=\"popup__close\" type=\"reset\" aria-label=\"Закрыть\" onClick={isClose}/>\n        <img className=\"popup__image\" \n          src={`${card.link}`}  \n          alt={card.name}/>\n        <p className=\"popup__image-title\">{card.name}</p>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup ({isOpen, onClose, onUpdateAvatar, isLoading}) {\n  const avatarRef = React.useRef('')\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value\n    })\n  }\n\n  React.useEffect(() => {\n    avatarRef.current.value = '';\n  }, [isOpen]);\n\n  return (\n    <PopupWithForm\n      title=\"Обновить аватар\"\n      name=\"avatar\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      isLoading={isLoading}\n      submitTitle=\"Сохранить\">\n\n      <fieldset className=\"popup__inputs\">\n        <input\n          ref={avatarRef}\n          className=\"popup__input popup__input_type_url\"\n          type=\"url\"\n          name=\"avatar\"\n          id=\"url-input-avatar\"\n          placeholder=\"Ссылка на аватар\"\n          required\n        />\n        <span className=\"popup__error\" id=\"url-input-avatar-error\" />\n      </fieldset>\n    </PopupWithForm>\n  )\n}\nexport default EditAvatarPopup","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup ({isOpen, onClose, onAddPlace}) {\n\n  const titleRef = React.useRef('')\n  const linkRef = React.useRef('')\n\n  React.useEffect(() => {\n    titleRef.current.value = '';\n    linkRef.current.value = '';\n  },[isOpen])\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddPlace({\n      name: titleRef.current.value,\n      link: linkRef.current.value\n    })\n  }\n\n  return(\n    <PopupWithForm\n      title=\"Новое место\"\n      name=\"new-place\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      submitTitle={'Создать'}>\n\n      <fieldset className=\"popup__inputs\">\n        <input\n          ref={titleRef}\n          className=\"popup__input popup__input_type_title\"\n          type=\"text\"\n          name=\"title\"\n          id=\"title-input\"\n          placeholder=\"Название\"\n          minLength=\"1\"\n          maxLength=\"30\"\n          required\n        />\n        <span className=\"popup__error\" id=\"title-input-error\" />\n        <input\n          ref={linkRef}\n          className=\"popup__input popup__input_type_url\"\n          type=\"url\"\n          name=\"url\"\n          id=\"url-input\"\n          placeholder=\"Ссылка на картинку\"\n          required\n        />\n        <span className=\"popup__error\" id=\"url-input-error\"/>\n      </fieldset>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup","  class Api {\n  constructor({baseUrl, headers}) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  getInfoFromServer() {\n    return Promise.all([this.getUserInfo(),this.getInitialCards()])\n  }\n\n\n  // обработчик респонсов сервера\n  _handleResponse(res){\n    if (res.ok) {\n      return res.json();\n      } else {\n      return Promise.reject(`Error! : ${res.status}`)\n    }\n\n  }\n\n  // получение начальных данных от пользователя\n  getUserInfo() { // Запрос на загрузку данных пользователя\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._headers\n    })\n    .then(this._handleResponse)\n  }\n\n\n  // получение серверных карточек\n  getInitialCards() {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._headers\n    }\n    )\n    .then(this._handleResponse)\n  }\n\n  //установка данных профиля\n  patchUserProfile(data) {\n    return fetch(`${this._baseUrl}/users/me`,\n      {\n        method: 'PATCH',\n        headers: this._headers,\n        body: JSON.stringify({\n          name: data.name,\n          about: data.about\n        })\n      })\n      .then(this._handleResponse)\n  }\n\n\n  // смена аватары\n  patchAvatar(avatar) {\n    return fetch(`${this._baseUrl}/users/me/avatar`,  {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: avatar.avatar\n      })\n    })\n      .then(this._handleResponse)\n  }\n\n postUserCard(item) {\n  return fetch(`${this._baseUrl}/cards`,  {\n    method: 'POST',\n    headers: this._headers,\n    body: JSON.stringify({\n        name: item.name,\n        link: item.link\n      })\n    })\n    .then(this._handleResponse)\n  }\n\n    // changeLikeCardStatus(id, isLiked) {\n    //   if (isLiked) {\n    //     return (\n    //       fetch(`${this._baseUrl}/cards/likes/${id}`, {\n    //         method: 'PUT',\n    //         headers: this._headers\n    //       })\n    //       .then(this._handleResponse)\n    //     )\n    //   }\n    //   else {\n    //     return fetch(`${this._baseUrl}/cards/likes/${id}`, {\n    //       method: 'PUT',\n    //       headers: this._headers\n    //     })\n    //     .then(this._handleResponse)\n    //   }\n    // }\n\n\n  //  постановка лаек\n  putLike(id) {\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\n      method: 'PUT',\n      headers: this._headers\n      })\n      .then(this._handleResponse)\n  }\n\n  // снятие лаека\n  deleteLike(id) {\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\n      method: 'DELETE',\n      headers: this._headers\n      }\n    )\n      .then(this._handleResponse)\n  }\n\n  // удалить карточку\n  deleteCard(id) {\n    return fetch(`${this._baseUrl}/cards/${id}`,  {\n      method: 'DELETE',\n      headers: this._headers\n      }\n    )\n      .then(this._handleResponse)\n  }\n\n}\n\n\nexport const api = new Api({\n  baseUrl:'https://mesto.nomoreparties.co/v1/cohort-14',\n  headers: {\n    authorization: '3cd7525a-bdb0-4a65-a82d-96b8a4b1711a',\n    'Content-Type': 'application/json'}\n});","import React from 'react';\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport EditProfilePopup from './EditProfilePopup'\nimport ImagePopup from \"./ImagePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nimport {api} from '../utils/Api'\nimport {CurrentUserContext} from '../context/CurrentUserContext'\n\nfunction App () {\n\n  // стейты попапов\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState('');\n  const [cards, setCards] = React.useState([]);\n  const [currentUser, setCurrentUser] = React.useState({})\n  const [isLoading, setIsLoading] = React.useState(false)\n\n\n  // effects block code\n  React.useEffect(() => {\n    api.getInfoFromServer()\n      .then(([userData, initialCards]) => {\n        setCurrentUser(userData)\n        setCards(initialCards)\n    })\n  }, [])\n\n  React.useEffect(()=> {\n    document.addEventListener('keydown', handleEscapeClose)\n    document.addEventListener(\"mousedown\", handleOverlayClose )\n\n    return () =>{\n      document.removeEventListener('keydown', handleEscapeClose)\n      document.removeEventListener(\"mousedown\", handleOverlayClose )\n    }\n  })\n\n\n  // close handlers\n\n  function handleEscapeClose(e) {\n    if (e.key === 'Escape') {\n      closeAllPopups()\n    }\n  }\n\n  function handleOverlayClose(e) {\n    if (e.target.classList.contains('popup')) {\n      closeAllPopups()\n    }\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard('');\n  }\n\n  //setstate block\n\n  function handleEditAvatarClick () {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n\n // fetch handlers\n  function handleUpdateUser(data) {\n    setIsLoading(true)\n    api.patchUserProfile(data)\n      .then((res) => {\n        setCurrentUser(res)\n        setIsLoading(false)\n        closeAllPopups()\n      }\n    )\n  }\n\n  function handleUpdateAvatar(data) {\n    setIsLoading(true)\n    api.patchAvatar(data)\n      .then((res) => {\n        setCurrentUser(res)\n        setIsLoading(false)\n        closeAllPopups();\n      }\n    )\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    if (!isLiked) {\n      api.putLike(card._id)\n        .then((newCard) => {\n          const newCards = cards.map((c) => c._id === card._id ? newCard : c)\n          setCards(newCards)\n        })\n    } else {\n      api.deleteLike(card._id)\n        .then((newCard) => {\n          const newCards = cards.map((c) => c._id === card._id ? newCard : c)\n          setCards(newCards)\n        })\n    }\n  }\n\n  function handleCardDelete(card) {\n    const isOwn = card.owner._id === currentUser._id;\n\n    api.deleteCard(card._id, !isOwn)\n      .then((newCard) => {\n        // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n        const newCards = cards.filter((c) => c._id === card._id ? !newCard : c);\n        // Обновляем стейт\n        setCards(newCards);\n      })\n  }\n\n  function handleAddPlaceSubmit(item){\n    api.postUserCard(item)\n      .then((res) => {\n        setCards([...cards, res]);\n        closeAllPopups()\n        }\n      )\n  }\n\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <div className=\"root\">\n          <Header />\n          <Main\n            cards={cards}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace ={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <Footer />\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n            isLoading={isLoading}\n          />\n\n         <AddPlacePopup\n           isOpen={isAddPlacePopupOpen}\n           onClose={closeAllPopups}\n           onAddPlace={handleAddPlaceSubmit}\n         />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n            isLoading={isLoading}\n          />\n\n          <ImagePopup\n            card={selectedCard}\n            isClose={closeAllPopups}\n\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","module.exports = __webpack_public_path__ + \"static/media/logo.c6f11019.svg\";"],"sourceRoot":""}